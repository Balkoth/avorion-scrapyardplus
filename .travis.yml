language: c

sudo: false

env:
  global:
    - LUAROCKS=3.0.3
  matrix:
    - LUA=lua5.2

branches:
  except:
    - slave
    - /^release-.*$/

before_install:
  - source .travis/setenv_lua.sh
  - bash < <(curl -s -L https://raw.github.com/colinmollenhour/modman/master/modman-installer)
  - luarocks install busted
  - git clone https://github.com/ctcDNightmare/avorion-ctccommon.git .modman/ctccommon/

script:
  - modman deploy-all
  - busted